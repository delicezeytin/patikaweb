# RunCloud Deployment Guide for Patika Çocuk Yuvası

This guide explains how to host your React application on a RunCloud-managed Ubuntu 22.04 server.

## Prerequisites

- A RunCloud account connected to your Ubuntu 22.04 server.
- The `release.zip` file generated by running `./deploy.sh` locally.

## Step 1: Create Web Application in RunCloud

1.  Log in to your RunCloud dashboard.
2.  Navigate to **Web Application** > **Create Web App**.
3.  **Application Type**: Select **Custom Web Application** (or "HTML/Static", though Custom gives more flexibility).
4.  **Application Name**: Enter `patika-yuva` (or your preferred name).
5.  **Domain Name**: Enter your domain (e.g., `patika.com` or a staging subdomain like `staging.patika.com`).
6.  **User**: Select the system user (usually `runcloud` or a specific user you created).
7.  **Public Path**: Keep default or set to `/` (RunCloud defaults to `/home/user/webapps/app-name`).
8.  Click **Add Web Application**.

## Step 2: Upload Project Files

1.  In the RunCloud dashboard, go to your newly created Web App.
2.  Click on **File Manager**.
3.  Navigate to the public root directory (e.g., `/home/runcloud/webapps/patika-yuva`).
4.  **Delete** the default `index.html` if it exists.
5.  **Upload** the `release.zip` file you created.
6.  **Extract** `release.zip` into this folder.
    - *Ensure that `index.html` and the `assets` folder are directly in the root, not inside a subfolder.*
7.  Delete `release.zip` after extraction.

## Step 3: Configure Nginx for React (SPA)

Since this is a Single Page Application (SPA), we need to tell Nginx to redirect all non-file requests to `index.html` so React Router works.

1.  In your Web App dashboard, go to **Nginx Config**.
2.  Click **Create Config**.
3.  **Type**: Select `location.root`.
4.  **Config Name**: `react_routes`.
5.  **Content**: Paste the content from `nginx.custom.conf`:

    ```nginx
    location / {
        try_files $uri $uri/ /index.html;
    }

    # Optional: Cache static assets
    location ~* \.(?:css|js|jpg|jpeg|gif|png|ico|cur|gz|svg|svgz|mp4|mp3|ogg|ogv|webm|htc|woff|woff2|ttf)$ {
        try_files $uri =404;
        expires 1y;
        access_log off;
        add_header Cache-Control "public";
    }
    ```

6.  Click **Add Config**.
7.  **Rebuild Nginx** (RunCloud usually prompts to restart/reload Nginx settings).

## Step 4: SSL (HTTPS)

1.  Go to **SSL/TLS**.
2.  Select **Let's Encrypt**.
3.  Enable **SSL Protocol**.
4.  Click **Submit** to generate a free SSL certificate.
5.  Once active, your site will be secure at `https://yourdomain.com`.

## Future Updates

To update the site in the future:
1.  Run `./deploy.sh` locally to create a new `release.zip`.
2.  Go to RunCloud File Manager.
3.  Delete old files (except maybe `robots.txt` or uploaded user content if any).
4.  Upload and extract the new `release.zip`.
